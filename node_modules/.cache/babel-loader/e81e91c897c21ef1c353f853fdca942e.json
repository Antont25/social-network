{"ast":null,"code":"import _slicedToArray from\"C:/program/samurai-way-TS/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{AppBar,Paper}from'@material-ui/core';import React,{useCallback,useEffect,useRef}from'react';import{createStyles,makeStyles}from'@material-ui/core/styles';import Toolbar from'@material-ui/core/Toolbar';import Typography from'@material-ui/core/Typography';import IconButton from'@material-ui/core/IconButton';import MenuIcon from'@material-ui/icons/Menu';import imgIcon from'../../assest/img/logo.png';import{MenuOpen}from'@material-ui/icons';import style from'./header.module.css';import NavBar from'../NavBar/NavBar';import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import{NavLink,useNavigate}from'react-router-dom';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';import{fetchLogout}from'../../redux/appReducer';import{showMenuHandler}from'../../redux/headerReducer';import{useAppDispatch,useAppSelector}from'../../utils/hooks/hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return createStyles({root:{flexGrow:1,position:'relative'},menuButton:{marginRight:theme.spacing(2)},title:{flexGrow:1}});});export var Header=function Header(){var dispatch=useAppDispatch();var classes=useStyles();var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var open=Boolean(anchorEl);var ref=useRef(null);var authorizedStatus=useAppSelector(function(state){return state.app.authorizedStatus;});var userFoto=useAppSelector(function(state){return state.app.authorizedProfileUser.photos.small;});var menuIsShow=useAppSelector(function(state){return state.headerPage.menuIsShow;});var navigate=useNavigate();var isShowNavBarMenu=useCallback(function(isShow){dispatch(showMenuHandler(isShow));},[dispatch]);var handleMenu=function handleMenu(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};function onclickLogoutHandler(){handleClose();dispatch(fetchLogout());}function navBarMenuClicked(event){var path=event.path||event.composedPath&&event.composedPath();if(!path.includes(ref.current)){isShowNavBarMenu&&isShowNavBarMenu(false);}}useEffect(function(){var navbar=document.getElementById('navBarMenu');navbar&&navbar.addEventListener('click',navBarMenuClicked);console.log('start');return function(){navbar&&navbar.removeEventListener('click',navBarMenuClicked);console.log('closed');};},[menuIsShow]);useEffect(function(){if(authorizedStatus==='fail')navigate('/');},[authorizedStatus]);return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsxs(\"div\",{className:style.menuBlock,children:[/*#__PURE__*/_jsx(IconButton,{edge:\"start\",className:classes.menuButton,color:\"inherit\",onClick:function onClick(){return isShowNavBarMenu(!menuIsShow);},children:/*#__PURE__*/_jsx(\"div\",{children:menuIsShow?/*#__PURE__*/_jsx(MenuOpen,{}):/*#__PURE__*/_jsx(MenuIcon,{})})}),menuIsShow&&/*#__PURE__*/_jsx(\"div\",{id:'navBarMenu',className:style.navBarMenu,children:/*#__PURE__*/_jsx(Paper,{ref:ref,className:style.navBar,children:/*#__PURE__*/_jsx(NavBar,{isShowNavBarMenu:isShowNavBarMenu})})})]}),/*#__PURE__*/_jsx(Typography,{className:classes.title,children:/*#__PURE__*/_jsx(\"img\",{style:{height:'20px'},src:imgIcon,alt:\"\"})}),authorizedStatus==='successfully'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",\"aria-label\":\"account of current user\",\"aria-controls\":\"menu-appbar\",\"aria-haspopup\":\"true\",onClick:handleMenu,children:userFoto&&/*#__PURE__*/_jsx(Avatar,{alt:\"Cindy Baker\",src:userFoto})}),/*#__PURE__*/_jsxs(Menu,{className:style.menu,id:\"menu-appbar\",anchorEl:anchorEl,anchorOrigin:{vertical:'bottom',horizontal:'left'},keepMounted:true,transformOrigin:{vertical:'bottom',horizontal:'center'},open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(NavLink,{to:'/Profile',children:/*#__PURE__*/_jsx(MenuItem,{onClick:handleClose,children:\"\\u041C\\u043E\\u0439 \\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"})}),/*#__PURE__*/_jsx(NavLink,{to:'/Profile',children:/*#__PURE__*/_jsx(MenuItem,{onClick:onclickLogoutHandler,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})})]})]}):/*#__PURE__*/_jsx(NavLink,{to:'/Login',children:/*#__PURE__*/_jsx(Button,{color:\"inherit\",children:\"Login\"})})]})})});};","map":{"version":3,"names":["AppBar","Paper","React","useCallback","useEffect","useRef","createStyles","makeStyles","Toolbar","Typography","IconButton","MenuIcon","imgIcon","MenuOpen","style","NavBar","Avatar","Button","NavLink","useNavigate","Menu","MenuItem","fetchLogout","showMenuHandler","useAppDispatch","useAppSelector","useStyles","theme","root","flexGrow","position","menuButton","marginRight","spacing","title","Header","dispatch","classes","useState","anchorEl","setAnchorEl","open","Boolean","ref","authorizedStatus","state","app","userFoto","authorizedProfileUser","photos","small","menuIsShow","headerPage","navigate","isShowNavBarMenu","isShow","handleMenu","event","currentTarget","handleClose","onclickLogoutHandler","navBarMenuClicked","path","composedPath","includes","current","navbar","document","getElementById","addEventListener","console","log","removeEventListener","menuBlock","navBarMenu","navBar","height","menu","vertical","horizontal"],"sources":["C:/program/samurai-way-TS/src/components/Header/Header.tsx"],"sourcesContent":["import {AppBar, Paper} from '@material-ui/core';\r\nimport React, {useCallback, useEffect, useRef} from 'react';\r\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport imgIcon from '../../assest/img/logo.png'\r\nimport {MenuOpen} from '@material-ui/icons';\r\nimport style from './header.module.css'\r\nimport NavBar from '../NavBar/NavBar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport {NavLink, useNavigate} from 'react-router-dom';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport {fetchLogout} from '../../redux/appReducer';\r\nimport {showMenuHandler} from '../../redux/headerReducer';\r\nimport {useAppDispatch, useAppSelector} from '../../utils/hooks/hooks';\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            flexGrow: 1,\r\n            position: 'relative',\r\n        },\r\n        menuButton: {\r\n            marginRight: theme.spacing(2),\r\n        },\r\n        title: {\r\n            flexGrow: 1,\r\n        },\r\n    }),\r\n);\r\n\r\nexport const Header: React.FC = () => {\r\n        const dispatch = useAppDispatch()\r\n        const classes = useStyles();\r\n\r\n        const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n        const open = Boolean(anchorEl);\r\n\r\n        const ref = useRef<HTMLInputElement | null>(null)\r\n\r\n        const authorizedStatus = useAppSelector(state => state.app.authorizedStatus)\r\n        const userFoto = useAppSelector(state => state.app.authorizedProfileUser.photos.small)\r\n        const menuIsShow = useAppSelector(state => state.headerPage.menuIsShow)\r\n\r\n        const navigate = useNavigate()\r\n\r\n        const isShowNavBarMenu = useCallback((isShow: boolean) => {\r\n            dispatch(showMenuHandler(isShow))\r\n        }, [dispatch]);\r\n\r\n        const handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n            setAnchorEl(event.currentTarget);\r\n        };\r\n\r\n        const handleClose = () => {\r\n            setAnchorEl(null);\r\n        };\r\n\r\n        function onclickLogoutHandler() {\r\n            handleClose()\r\n            dispatch(fetchLogout())\r\n        }\r\n\r\n\r\n        function navBarMenuClicked(event: any) {\r\n            let path = event.path || (event.composedPath && event.composedPath())\r\n            if (!path.includes(ref.current)) {\r\n                isShowNavBarMenu && isShowNavBarMenu(false)\r\n            }\r\n        }\r\n\r\n        useEffect(() => {\r\n            let navbar = document.getElementById('navBarMenu')\r\n            navbar && navbar.addEventListener('click', navBarMenuClicked)\r\n            console.log('start')\r\n            return () => {\r\n                navbar && navbar.removeEventListener('click', navBarMenuClicked)\r\n                console.log('closed')\r\n\r\n            }\r\n        }, [menuIsShow])\r\n\r\n        useEffect(() => {\r\n            if (authorizedStatus === 'fail') navigate('/')\r\n        }, [authorizedStatus])\r\n\r\n        return (\r\n            <div className={classes.root}>\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <div className={style.menuBlock}>\r\n                            <IconButton edge=\"start\"\r\n                                        className={classes.menuButton}\r\n                                        color=\"inherit\"\r\n                                        onClick={() => isShowNavBarMenu(!menuIsShow)}\r\n                            >\r\n                                <div>\r\n                                    {menuIsShow\r\n                                        ? <MenuOpen/>\r\n                                        : <MenuIcon/>\r\n                                    }\r\n                                </div>\r\n                            </IconButton>\r\n                            {menuIsShow &&\r\n                                <div id={'navBarMenu'} className={style.navBarMenu}>\r\n                                    <Paper ref={ref} className={style.navBar}>\r\n                                        <NavBar isShowNavBarMenu={isShowNavBarMenu}\r\n                                        />\r\n                                    </Paper>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        <Typography className={classes.title}>\r\n                            <img style={{height: '20px'}} src={imgIcon} alt=\"\"/>\r\n                        </Typography>\r\n                        {authorizedStatus === 'successfully'\r\n                            ? <div>\r\n                                <IconButton color=\"inherit\"\r\n                                            aria-label=\"account of current user\"\r\n                                            aria-controls=\"menu-appbar\"\r\n                                            aria-haspopup=\"true\"\r\n                                            onClick={handleMenu}>\r\n                                    {userFoto && <Avatar alt=\"Cindy Baker\" src={userFoto}/>}\r\n                                </IconButton>\r\n                                <Menu className={style.menu}\r\n                                      id=\"menu-appbar\"\r\n                                      anchorEl={anchorEl}\r\n                                      anchorOrigin={{\r\n                                          vertical: 'bottom',\r\n                                          horizontal: 'left',\r\n                                      }}\r\n                                      keepMounted\r\n                                      transformOrigin={{\r\n                                          vertical: 'bottom',\r\n                                          horizontal: 'center',\r\n                                      }}\r\n                                      open={open}\r\n                                      onClose={handleClose}\r\n                                >\r\n                                    <NavLink to={'/Profile'}>\r\n                                        <MenuItem onClick={handleClose}>Мой рофиль</MenuItem>\r\n                                    </NavLink>\r\n                                    <NavLink to={'/Profile'}>\r\n                                        <MenuItem onClick={onclickLogoutHandler}>Выйти</MenuItem>\r\n                                    </NavLink>\r\n\r\n                                </Menu>\r\n                            </div>\r\n                            : <NavLink to={'/Login'}>\r\n                                <Button color=\"inherit\">Login</Button>\r\n                            </NavLink>\r\n                        }\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </div>\r\n\r\n        )\r\n\r\n    }\r\n;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}