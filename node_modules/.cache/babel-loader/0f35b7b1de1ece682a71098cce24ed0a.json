{"ast":null,"code":"import { api } from '../api/api';\nimport { setIsLoading } from './appReducer';\nimport { errorFromStatusCodeOrApplication } from '../utils/error-utils';\nconst initialSateProfile = {\n  posts: [{\n    id: 1,\n    massage: 'Everything is great',\n    likes: 3\n  }, {\n    id: 2,\n    massage: 'Looking for my dream job',\n    likes: 4\n  }, {\n    id: 3,\n    massage: 'I develop my skills',\n    likes: 5\n  }, {\n    id: 4,\n    massage: 'Got a job of your dreams',\n    likes: 12\n  }],\n  userProfile: {},\n  userStatus: null\n};\nexport const profileReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialSateProfile;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'PROFILE/ADD_POST':\n      let newPost = {\n        id: 23,\n        massage: action.payload,\n        likes: 0\n      };\n      return { ...state,\n        posts: [newPost, ...state.posts]\n      };\n\n    case 'PROFILE/SET_USER_PROFILE':\n      return { ...state,\n        userProfile: action.payload\n      };\n\n    case 'PROFILE/SET_STATUS_UPDATES':\n      return { ...state,\n        userStatus: action.payload\n      };\n\n    case 'PROFILE/UPDATE_AVATAR_SUCCESS':\n      return { ...state,\n        userProfile: { ...state.userProfile,\n          photos: action.payload\n        }\n      };\n\n    default:\n      return state;\n  }\n}; //action\n\nexport const addPost = payload => ({\n  type: 'PROFILE/ADD_POST',\n  payload\n});\nexport const setUserProfile = payload => ({\n  type: 'PROFILE/SET_USER_PROFILE',\n  payload\n});\nexport const setStatusUpdates = payload => ({\n  type: 'PROFILE/SET_STATUS_UPDATES',\n  payload\n});\nexport const updateAvatarSuccess = payload => ({\n  type: 'PROFILE/UPDATE_AVATAR_SUCCESS',\n  payload\n}); //thunk\n\nexport const fetchUserProfileData = paramsURL => async dispatch => {\n  try {\n    dispatch(setIsLoading(true));\n\n    if (paramsURL) {\n      const res = await api.getUserProfile(paramsURL);\n      dispatch(setUserProfile(res));\n      const responseStatus = await api.getStatusUser(res.userId);\n      dispatch(setStatusUpdates(responseStatus));\n    }\n  } catch (e) {\n    const error = e;\n    errorFromStatusCodeOrApplication(error, dispatch);\n  } finally {\n    dispatch(setIsLoading(false));\n  }\n};\nexport const fetchStatusUpdates = (newStatus, usersId) => async dispatch => {\n  try {\n    dispatch(setIsLoading(true));\n    const res = await api.statusUpdates(newStatus);\n\n    if (res.resultCode === 0) {\n      const responseNewStatus = await api.getStatusUser(usersId);\n      dispatch(setStatusUpdates(responseNewStatus));\n    }\n  } catch (e) {\n    const error = e;\n    errorFromStatusCodeOrApplication(error, dispatch);\n  } finally {\n    dispatch(setIsLoading(false));\n  }\n};\nexport const updateAvatar = image => async (dispatch, getState) => {\n  try {\n    dispatch(setIsLoading(true));\n    const res = await api.savePhoto(image);\n\n    if (res.resultCode === 0) {\n      dispatch(updateAvatarSuccess(res.data.photos));\n    }\n  } catch (e) {\n    const error = e;\n    errorFromStatusCodeOrApplication(error, dispatch);\n  } finally {\n    dispatch(setIsLoading(false));\n  }\n};\nexport const updateContacts = data => async dispatch => {}; //type","map":{"version":3,"names":["api","setIsLoading","errorFromStatusCodeOrApplication","initialSateProfile","posts","id","massage","likes","userProfile","userStatus","profileReducer","state","action","type","newPost","payload","photos","addPost","setUserProfile","setStatusUpdates","updateAvatarSuccess","fetchUserProfileData","paramsURL","dispatch","res","getUserProfile","responseStatus","getStatusUser","userId","e","error","fetchStatusUpdates","newStatus","usersId","statusUpdates","resultCode","responseNewStatus","updateAvatar","image","getState","savePhoto","data","updateContacts"],"sources":["C:/program/samurai-way-TS/src/redux/profileReducer.ts"],"sourcesContent":["import {api, ContactsType, PhotosType, UserProfileType} from '../api/api';\r\nimport {setIsLoading} from './appReducer';\r\nimport {AppThunk} from './store';\r\nimport {AxiosError} from 'axios';\r\nimport {errorFromStatusCodeOrApplication} from '../utils/error-utils';\r\n\r\nconst initialSateProfile = {\r\n    posts: [\r\n        {id: 1, massage: 'Everything is great', likes: 3},\r\n        {id: 2, massage: 'Looking for my dream job', likes: 4},\r\n        {id: 3, massage: 'I develop my skills', likes: 5},\r\n        {id: 4, massage: 'Got a job of your dreams', likes: 12},\r\n    ] as Array<PostsType>,\r\n    userProfile: {} as UserProfileType,\r\n    userStatus: null as null | string\r\n}\r\n\r\nexport const profileReducer = (state = initialSateProfile, action: ActionProfileReducerType): InitialSateProfileType => {\r\n    switch (action.type) {\r\n        case 'PROFILE/ADD_POST' :\r\n            let newPost: PostsType = {\r\n                id: 23,\r\n                massage: action.payload,\r\n                likes: 0\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: [newPost, ...state.posts],\r\n            }\r\n        case 'PROFILE/SET_USER_PROFILE':\r\n            return {\r\n                ...state,\r\n                userProfile: action.payload\r\n            }\r\n        case 'PROFILE/SET_STATUS_UPDATES':\r\n            return {\r\n                ...state,\r\n                userStatus: action.payload\r\n            }\r\n        case 'PROFILE/UPDATE_AVATAR_SUCCESS':\r\n            return {\r\n                ...state,\r\n                userProfile: {...state.userProfile, photos: action.payload}\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\n//action\r\nexport const addPost = (payload: string) =>\r\n    ({type: 'PROFILE/ADD_POST', payload} as const)\r\nexport const setUserProfile = (payload: UserProfileType) =>\r\n    ({type: 'PROFILE/SET_USER_PROFILE', payload} as const)\r\nexport const setStatusUpdates = (payload: string | null) =>\r\n    ({type: 'PROFILE/SET_STATUS_UPDATES', payload} as const)\r\nexport const updateAvatarSuccess = (payload: PhotosType) =>\r\n    ({type: 'PROFILE/UPDATE_AVATAR_SUCCESS', payload} as const)\r\n\r\n//thunk\r\nexport const fetchUserProfileData = (paramsURL: number): AppThunk => async dispatch => {\r\n    try {\r\n        dispatch(setIsLoading(true))\r\n        if (paramsURL) {\r\n            const res = await api.getUserProfile(paramsURL)\r\n            dispatch(setUserProfile(res))\r\n            const responseStatus = await api.getStatusUser(res.userId)\r\n            dispatch(setStatusUpdates(responseStatus))\r\n        }\r\n    } catch (e) {\r\n        const error = e as Error | AxiosError\r\n        errorFromStatusCodeOrApplication(error, dispatch)\r\n    } finally {\r\n        dispatch(setIsLoading(false))\r\n    }\r\n}\r\nexport const fetchStatusUpdates = (newStatus: string, usersId: number): AppThunk => async dispatch => {\r\n    try {\r\n        dispatch(setIsLoading(true))\r\n        const res = await api.statusUpdates(newStatus)\r\n        if (res.resultCode === 0) {\r\n            const responseNewStatus = await api.getStatusUser(usersId)\r\n            dispatch(setStatusUpdates(responseNewStatus))\r\n        }\r\n    } catch (e) {\r\n        const error = e as Error | AxiosError\r\n        errorFromStatusCodeOrApplication(error, dispatch)\r\n    } finally {\r\n        dispatch(setIsLoading(false))\r\n    }\r\n}\r\nexport const updateAvatar = (image: any): AppThunk => async (dispatch, getState) => {\r\n    try {\r\n        dispatch(setIsLoading(true))\r\n        const res = await api.savePhoto(image)\r\n        if (res.resultCode === 0) {\r\n            dispatch(updateAvatarSuccess(res.data.photos))\r\n        }\r\n    } catch (e) {\r\n        const error = e as Error | AxiosError\r\n        errorFromStatusCodeOrApplication(error, dispatch)\r\n    } finally {\r\n        dispatch(setIsLoading(false))\r\n    }\r\n}\r\nexport const updateContacts = (data: ContactsType): AppThunk => async dispatch => {\r\n    \r\n}\r\n\r\n//type\r\nexport type InitialSateProfileType = typeof initialSateProfile\r\nexport type PostsType = {\r\n    id: number\r\n    massage: string\r\n    likes: number\r\n}\r\nexport type ActionProfileReducerType =\r\n    ReturnType<typeof addPost>\r\n    | ReturnType<typeof setUserProfile>\r\n    | ReturnType<typeof setStatusUpdates>\r\n    | ReturnType<typeof updateAvatarSuccess>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}