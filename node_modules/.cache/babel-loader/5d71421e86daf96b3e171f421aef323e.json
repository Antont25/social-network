{"ast":null,"code":"import _slicedToArray from\"C:/program/samurai-way-TS/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import CreateIcon from'@material-ui/icons/Create';import style from'../Users/users.module.css';import TextField from'@material-ui/core/TextField/TextField';import IconButton from'@material-ui/core/IconButton/IconButton';import{createStyles,makeStyles}from'@material-ui/core/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return createStyles({root:{'& > *':{marginLeft:theme.spacing(1),paddingTop:'3px'},'& .MuiInput-underline:after':{borderBottomColor:'#2186c4'},'& .MuiInput-underline:before':{borderBottomColor:'#2186c4'},'& .MuiInput-underline:hover:not(.Mui-disabled):before':{borderBottomColor:'#2186c4'}}});});export var EditMode=function EditMode(props){var classes=useStyles();var _useState=useState(props.value?props.value:''),_useState2=_slicedToArray(_useState,2),valueInput=_useState2[0],setValueInput=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editMode=_useState4[0],setEditMode=_useState4[1];function onClickHandler(){setEditMode(true);}function onBlurHandler(){if(valueInput!==props.value){valueInput&&props.callback(valueInput);}setEditMode(false);}useEffect(function(){if(props.value){setValueInput(props.value);}},[props.value]);return/*#__PURE__*/_jsx(_Fragment,{children:props.isOwner?/*#__PURE__*/_jsx(_Fragment,{children:editMode?/*#__PURE__*/_jsx(TextField,{id:props.label,multiline:true,autoFocus:true,maxRows:4,inputProps:{maxLength:props.length},value:valueInput,onBlur:onBlurHandler,color:'primary',error:valueInput.length>props.length-1,helperText:\"\\u043C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C \".concat(props.length,\" \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432\"),onFocus:function onFocus(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length);},className:classes.root,onChange:function onChange(e){return setValueInput(e.currentTarget.value);}}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SpanText,{value:props.value,className:style.textStatus}),/*#__PURE__*/_jsx(IconButton,{size:'small',disabled:editMode,onClick:onClickHandler,children:/*#__PURE__*/_jsx(CreateIcon,{className:style.icon})})]})}):/*#__PURE__*/_jsx(SpanText,{value:props.value})});};var SpanText=function SpanText(props){return/*#__PURE__*/_jsx(\"span\",{className:props.className,onDoubleClick:props.callback,children:props.value||'нету даных'});};","map":{"version":3,"names":["React","useEffect","useState","CreateIcon","style","TextField","IconButton","createStyles","makeStyles","useStyles","theme","root","marginLeft","spacing","paddingTop","borderBottomColor","EditMode","props","classes","value","valueInput","setValueInput","editMode","setEditMode","onClickHandler","onBlurHandler","callback","isOwner","label","maxLength","length","e","currentTarget","setSelectionRange","textStatus","icon","SpanText","className"],"sources":["C:/program/samurai-way-TS/src/components/EditMode/EditMode.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport style from '../Users/users.module.css';\r\nimport TextField from '@material-ui/core/TextField/TextField';\r\nimport IconButton from '@material-ui/core/IconButton/IconButton';\r\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\r\n\r\ntype EditModeParams = {\r\n    value: string | null\r\n    isOwner: boolean\r\n    label: string\r\n    length: number\r\n    callback: (value: string) => void\r\n};\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            '& > *': {\r\n                marginLeft: theme.spacing(1),\r\n                paddingTop: '3px'\r\n\r\n            },\r\n            '& .MuiInput-underline:after': {\r\n                borderBottomColor: '#2186c4',\r\n            },\r\n            '& .MuiInput-underline:before': {\r\n                borderBottomColor: '#2186c4',\r\n            },\r\n            '& .MuiInput-underline:hover:not(.Mui-disabled):before': {\r\n                borderBottomColor: '#2186c4',\r\n            },\r\n        },\r\n    }),\r\n);\r\nexport const EditMode = (props: EditModeParams) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [valueInput, setValueInput] = useState(props.value ? props.value : '')\r\n    const [editMode, setEditMode] = useState(false)\r\n\r\n    function onClickHandler() {\r\n        setEditMode(true)\r\n    }\r\n\r\n    function onBlurHandler() {\r\n\r\n        if (valueInput !== props.value) {\r\n            valueInput && props.callback(valueInput)\r\n        }\r\n        setEditMode(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.value) {\r\n            setValueInput(props.value)\r\n        }\r\n    }, [props.value])\r\n\r\n    return (\r\n        <>\r\n            {props.isOwner\r\n                ? <>\r\n                    {editMode\r\n                        ? <TextField\r\n                            id={props.label}\r\n                            multiline\r\n                            autoFocus={true}\r\n                            maxRows={4}\r\n                            inputProps={{maxLength: props.length}}\r\n                            value={valueInput}\r\n                            onBlur={onBlurHandler}\r\n                            color={'primary'}\r\n                            error={valueInput.length > props.length - 1}\r\n                            helperText={`максимум ${props.length} символов`}\r\n                            onFocus={(e) =>\r\n                                e.currentTarget.setSelectionRange(\r\n                                    e.currentTarget.value.length,\r\n                                    e.currentTarget.value.length\r\n                                )}\r\n                            className={classes.root}\r\n                            onChange={e => setValueInput(e.currentTarget.value)}\r\n\r\n                        />\r\n\r\n                        : <>\r\n                            <SpanText value={props.value}\r\n                                      className={style.textStatus}/>\r\n\r\n                            <IconButton size={'small'} disabled={editMode} onClick={onClickHandler}>\r\n                                <CreateIcon className={style.icon}/>\r\n                            </IconButton>\r\n                        </>\r\n                    }\r\n                </>\r\n                : <SpanText value={props.value}/>\r\n            }\r\n        </>\r\n    );\r\n};\r\n\r\ntype SpanTextType = {\r\n    value: string | null\r\n    className?: string\r\n    callback?: () => void\r\n}\r\nconst SpanText = (props: SpanTextType) => {\r\n    return <span className={props.className}\r\n                 onDoubleClick={props.callback}>\r\n            {props.value || 'нету даных'}\r\n        </span>\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}